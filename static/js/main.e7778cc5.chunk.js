/*! For license information please see main.e7778cc5.chunk.js.LICENSE.txt */
(this.webpackJsonpguessblue=this.webpackJsonpguessblue||[]).push([[0],{111:function(e,n,t){},125:function(e,n,t){},126:function(e,n,t){},127:function(e,n,t){},128:function(e,n,t){},129:function(e,n,t){},137:function(e,n,t){},138:function(e,n,t){},169:function(e,n,t){},276:function(e,n,t){},277:function(e,n,t){},278:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t.n(c),a=t(112),s=t.n(a),i=(t(125),t(4));t(126),t(127);var l=function(e,n){var t="guessblue-"+e,r=Object(c.useState)((function(){var e=localStorage.getItem(t);return null!=e?"undefined"===e?null:JSON.parse(e):"function"===typeof n?n():n})),a=Object(i.a)(r,2),s=a[0],l=a[1];return Object(c.useEffect)((function(){localStorage.setItem(t,JSON.stringify(s))}),[t,s]),[s,l]},d=(t(128),t(281)),j=t(22),o=(t(129),t(1));var u=function(){return Object(o.jsx)(j.a,{children:Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:Object(o.jsx)(j.b,{to:"/rules",children:"Rules"})}),Object(o.jsx)("li",{children:Object(o.jsx)(j.b,{to:"/invite",children:"New Game"})}),Object(o.jsx)("li",{children:Object(o.jsx)(j.b,{to:"/invite",children:"Invite"})}),Object(o.jsx)("li",{children:Object(o.jsx)(j.b,{to:"/leaderboard",children:"Leaderboard"})})]})})};var b=function(){var e=Object(c.useState)(!1),n=Object(i.a)(e,2),t=n[0],r=n[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("header",{children:[Object(o.jsxs)("h1",{className:"logo",children:["guess",Object(o.jsx)("span",{children:"blue?"})]}),Object(o.jsx)(d.a,{toggled:t,toggle:r,isOpen:t,onToggle:function(e){r(!!e)},direction:"left",color:"turquoise",rounded:!0,distance:"lg",size:42,label:"Show menu"})]}),Object(o.jsx)("br",{}),Object(o.jsx)("nav",{style:{display:t?"block":"none"},children:Object(o.jsx)(u,{})})]})},O=t(114);t(137);var m=function(e){var n=e.onIdSubmit,t=Object(c.useRef)();return Object(o.jsx)("div",{className:"login",children:Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(t.current.value)},children:[Object(o.jsx)("label",{for:"name",children:Object(o.jsx)("b",{children:"name"})}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{type:"text",placeholder:"whatever you want",name:"name",required:!0})," ",Object(o.jsx)("br",{}),Object(o.jsx)("label",{for:"id",children:Object(o.jsx)("b",{children:"id"})}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{type:"text",placeholder:"a bunch of special letters and numbers",name:"id",ref:t,required:!0}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{onClick:function(e){n(Object(O.v4)())},type:"button",value:"new ID"})]})})},f=t(21),x=r.a.createContext();function h(){return Object(c.useContext)(x)}function v(e){var n=e.children,t=l("friends",[]),c=Object(i.a)(t,2),r=c[0],a=c[1];return Object(o.jsx)(x.Provider,{value:{friends:r,addFriend:function(e,n){a((function(t){return[].concat(Object(f.a)(t),[{id:e,name:n}])}))},deleteFriend:function(e){a(r.filter((function(n){return n.id!=e})))},updateNickname:function(e,n){var t=n;console.log("newName: ".concat(t));var c=r.findIndex((function(n){return n.id===e}));r[c].name=t,console.log("updated nickname: ".concat(r[c].name))}},children:n})}var g=function(){var e=h().friends;return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("ul",{children:e.map((function(e){return Object(o.jsx)("li",{children:e.name},e.id)}))})})};t(138);var p=function(){var e=Object(c.useRef)(),n=Object(c.useRef)(),t=h(),r=t.friends,a=t.addFriend,s=t.deleteFriend,l=t.updateNickname,d=Object(c.useState)(!1),j=Object(i.a)(d,2),u=j[0],b=j[1],O=r.map((function(e){return e.id}));return Object(o.jsxs)("div",{className:"friends",children:[Object(o.jsx)("div",{className:"invite-friend",children:Object(o.jsxs)("form",{onSubmit:function(t){t.preventDefault();var c=e.current.value,r=n.current.value;if(console.log("id: ".concat(c,"\nname: ").concat(r)),O.includes(c)){if(l(c,r),!u)return void b(!0);b(!1)}else a(c,r)},children:[Object(o.jsx)("label",{htmlFor:"new-friend-id",id:"id-label",children:"friend's id:"}),Object(o.jsx)("input",{type:"text",name:"new-friend-id",id:"new-friend-id",placeholder:"enter your friend's id",ref:e,required:!0}),Object(o.jsx)("br",{}),Object(o.jsx)("label",{htmlFor:"new-friend-name",id:"name-label",children:"nickname:"}),Object(o.jsx)("input",{type:"text",name:"new-friend-name",id:"new-friend-name",placeholder:"enter a nickname",ref:n,required:!0}),Object(o.jsx)("input",{type:"submit",id:"submit-new-friend",value:"+"}),Object(o.jsx)("button",{id:"delete-friend",onClick:function(n){n.preventDefault(),s(e.current.value)},children:"-"})]})}),Object(o.jsxs)("div",{className:"friends-list",children:[Object(o.jsx)("ul",{className:"added-friends",children:Object(o.jsx)(g,{})}),Object(o.jsx)("button",{onClick:function(e){console.log("allIds: \n".concat(O))},children:"?"})]})]})},N=t(7),y=t(115),S=t.n(y),k=r.a.createContext();function C(e){var n=e.id,t=e.children,r=Object(c.useState)(),a=Object(i.a)(r,2),s=a[0],l=a[1];return Object(c.useEffect)((function(){var e=S()("http://localhost:4040",{query:{id:n}});return l(e),function(){return e.close()}}),[n]),Object(o.jsx)(k.Provider,{value:s,children:t})}var w=r.a.createContext();function G(){return Object(c.useContext)(w)}function F(e){var n=e.children,t=e.id,r=l("games",[]),a=Object(i.a)(r,2),s=a[0],d=a[1],j=Object(c.useState)(0),u=Object(i.a)(j,2),b=u[0],O=u[1],m=h().friends,x=Object(c.useContext)(k);for(var v=0;v<s.length;v++)for(var g=0;g<m.length;g++)if(s[v].partner===m[g].id){var p=m[g].name;s[v].name=p,s[v].index=[v]}var y=s.map((function(e,n){var c=n===b,r=e.messages.map((function(e){var n=m.find((function(n){return n.id===e.sender})),c=n&&n.name||e.sender,r=t===e.sender;return Object(N.a)(Object(N.a)({},e),{},{senderName:c,fromMe:r})}));return Object(N.a)(Object(N.a)({},e),{},{messages:r,selected:c})})),S=Object(c.useCallback)((function(e){var n=e.partner,t=e.text,c=e.sender;console.log("\ud83d\udcdf ".concat(JSON.stringify(t))),d((function(e){var r=!1,a={sender:c,text:t},s=e.map((function(e){return e.partner===n?(r=!0,Object(N.a)(Object(N.a)({},e),{},{messages:[].concat(Object(f.a)(e.messages),[a])})):e}));return r?s:[].concat(Object(f.a)(e),[{partner:n,messages:[a]}])}))}),[d]);Object(c.useEffect)((function(){if(null!=x)return x.on("receive-message",S),function(){return x.off("receive-message")};console.log("\ud83d\udd73\ufe0f SOCKET IS NULL")}),[x,S]);var C={games:y,selectedGame:y[b],sendMessage:function(e,n){x.emit("send-message",{partner:e,text:n}),S({partner:e,text:n,sender:t})},selectGameIndex:O,createGame:function(e){d((function(n){if(!n.includes(e))return[].concat(Object(f.a)(n),[{partner:e,messages:[]}]);console.log("Sorry, you already have a game with them.")}))}};return Object(o.jsx)(w.Provider,{value:C,children:n})}var I=function(e){var n=e.setOpenGame,t=G(),c=t.games,r=t.selectGameIndex;function a(e){e.preventDefault(),r(e.target.value),n(!0)}return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("ul",{children:c.map((function(e){return Object(o.jsxs)("div",{className:"created-games",children:[Object(o.jsx)("li",{value:e.index,name:e.name,onClick:a,children:e.name},e.partner),Object(o.jsx)("button",{children:"\ud83d\uddd1\ufe0f"})]})}))})})};t(169);var D=function(e){var n=e.setOpenGame,t=h().friends,r=G().createGame,a=Object(c.useState)(""),s=Object(i.a)(a,2),l=s[0],d=s[1];return Object(o.jsxs)("div",{className:"games",children:[Object(o.jsx)("div",{className:"start-game",children:Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(r),r(l)},children:[Object(o.jsxs)("label",{for:"choose-friend",id:"new-game-label",children:["start a new game with your bud"," "]}),Object(o.jsxs)("select",{name:"choose-friend",id:"choose-friend",onChange:function(e){d(e.target.value)},children:[Object(o.jsx)("option",{selected:!0,value:"pick a friend",children:"pick your favorite friend"}),t.map((function(e){return Object(o.jsx)("option",{value:e.id,label:e.name,children:e.name},e.id)}))]}),Object(o.jsx)("input",{type:"submit",id:"start-game-button",value:"\ud83c\udfa8"})]})}),Object(o.jsx)("div",{className:"games-list",children:Object(o.jsx)("ul",{className:"created-games",children:Object(o.jsx)(I,{setOpenGame:n})})})]})},q=t(120);t(276);var E=function(){var e=Object(c.useState)("#40e0d0"),n=Object(i.a)(e,2),t=n[0],r=n[1];function a(){console.log(t.background)}return Object(o.jsxs)("div",{className:"custom-picker",children:[Object(o.jsx)("div",{className:"color-block"}),Object(o.jsx)(q.a,{color:t,onChangeComplete:function(e,n){console.log("color changing..."),r({background:e.hex}),a()}})]})};var J=function(){var e=G().selectedGame,n=Object(c.useCallback)((function(e){e&&e.scrollIntoView({smooth:!0})}),[]);return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:"messages",children:e.messages.map((function(t,c){var r=e.messages.length-1===c;return Object(o.jsxs)("div",{ref:r?n:null,className:"single-message-container",children:[Object(o.jsx)("div",{className:"single-message-text",children:t.text}),Object(o.jsx)("div",{className:"single-message-name",children:t.fromMe?"you":t.senderName})]},c)}))})})};t(111);var L=function(e){var n=e.openGame,t=e.setOpenGame,r=Object(c.useState)(""),a=Object(i.a)(r,2),s=a[0],l=a[1],d=G(),j=d.selectedGame,u=d.sendMessage,b=j?j.name:null;return n?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"modal-overlay",onClick:function(){t(!1)}}),Object(o.jsxs)("div",{className:"open-game-modal",children:[Object(o.jsxs)("header",{className:"game-header",children:[Object(o.jsxs)("h4",{className:"game-header",children:["playing with ",b]}),Object(o.jsx)("h5",{className:"game-header",children:"it's a color conspiracy!"})]}),Object(o.jsx)("section",{className:"color-display",children:Object(o.jsx)(E,{})}),Object(o.jsx)(J,{}),Object(o.jsx)("div",{className:"footer-form",children:Object(o.jsxs)("form",{className:"send-message",onSubmit:function(e){e.preventDefault(),u(j.partner,s),l("")},children:[Object(o.jsx)("input",{className:"textbox",required:!0,type:"textarea",value:s,onChange:function(e){return l(e.target.value)}}),Object(o.jsx)("button",{className:"send-button",type:"submit",value:"send"})]})})]})]}):null};t(277);var M=function(e){var n=e.id,t=(G().selectedGame,Object(c.useState)(!1)),r=Object(i.a)(t,2),a=r[0],s=r[1],l=Object(c.useState)(!1),d=Object(i.a)(l,2),j=d[0],u=d[1];return Object(o.jsxs)("div",{className:"dashboard",children:[Object(o.jsx)(L,{openGame:j,setOpenGame:u}),Object(o.jsx)("div",{className:"dash-main",children:a?Object(o.jsx)(D,{setOpenGame:u}):Object(o.jsx)(p,{})}),Object(o.jsxs)("footer",{children:[Object(o.jsx)("div",{className:"id-display",children:Object(o.jsxs)("p",{children:["your id:",Object(o.jsx)("span",{className:"id-span",children:n})]})}),Object(o.jsxs)("div",{className:"footer-tabs",children:[Object(o.jsx)("button",{type:"button",name:"game tab",id:"big-game-tab",onClick:function(){return s(!0)},children:Object(o.jsx)("h3",{children:"games"})}),Object(o.jsx)("button",{type:"button",name:"friends tab",id:"big-friends-tab",onClick:function(){return s(!1)},children:Object(o.jsx)("h3",{children:"friends"})})]})]})]})};var P=function(){var e=l("id"),n=Object(i.a)(e,2),t=n[0],a=n[1],s=Object(c.useState)(""),d=Object(i.a)(s,2),j=(d[0],d[1]);r.a.useEffect((function(){fetch("/api").then((function(e){return e.json()})).then((function(e){return j(e.message)}))}),[]);var u=Object(o.jsx)(C,{id:t,children:Object(o.jsx)(v,{children:Object(o.jsx)(F,{id:t,children:Object(o.jsx)(M,{id:t})})})});return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)("header",{children:Object(o.jsx)(b,{})}),Object(o.jsx)("main",{children:Object(o.jsx)(o.Fragment,{children:t?u:Object(o.jsx)(m,{onIdSubmit:a})})})]})},R=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,282)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,a=n.getLCP,s=n.getTTFB;t(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(P,{})}),document.getElementById("root")),R()}},[[278,1,2]]]);
//# sourceMappingURL=main.e7778cc5.chunk.js.map